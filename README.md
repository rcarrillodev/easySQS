<<<<<<< HEAD

=======
# easy_sqs.py

`easy_sqs.py` is a Python script designed to send messages to an AWS SQS queue. It supports reading the message body from an specified file and message attributes from a JSON file. The script allows specifying the AWS profile, queue name, and other parameters via a `.properties` file.

For FiFo, the message group ID and message deduplicationID are autogenerated, message deduplication ID will be autogenerated on every message sent, in case you're testing message ordering for FiFo queues.

By enabling the fifo test feature, this script will send __the same message__ with a common (autogenerated group ID) and an randomly generated deduplication ID.

**This script won't modify the payload contents**

## Features
- Send messages to AWS SQS queues, including FIFO queues.
- Support for large payloads stored in S3 via extended client.
- Configurable via a `.properties` file.
- Debug logging for detailed output.
- FiFo Support
- It can be used for messafe ordering tests

## Requirements
- Python 3.x
- AWS credentials configured in your environment or via a profile.
- Required Python packages (install via `requirements.txt`):
  ```bash
  pip install -r requirements.txt
  ```

## Usage

### Command-Line Arguments
The script accepts the following arguments:
- `-p, --properties`: Path to the `.properties` file (required).
- `-d, --debug`: Enable debug logging (optional).
- `-s, --properties_section`: Section in the `.properties` file to read parameters from (default: `DEFAULT`).

### Example Command
```bash
python easy_sqs.py -p parameters.properties -d
```

### `.properties` File Format
The `.properties` file should include the following parameters:
```properties
queue_url=your-sqs-url #Your AWS SQS URL
aws_profile=your-aws-profile #The aws profile used to access the resources
message_body=path/to/message_body.xml #The path of message payload file
message_attributes=path/to/message_attributes.json #The path of message attributes file
s3_bucket=your-s3-bucket-name #Optional : S3 bucket for large messages
fifo_test=true #Optional: Enable fifo tests by sending the same payload as many times as specified in `fifo_ num_of_messages` with the same auto-gen message groupID and different deduplicationId
fifo_num_of_messages=5 #Optional:  if fifo_test is enabled, this parameter specifies the number of messages sent within the same group id
```

### How It Works
1. **Load Parameters**: The script reads parameters from the `.properties` file specified via the `-p` argument.
2. **Load Message Body**: The message body is loaded from the XML file specified in the `message_body` parameter.
3. **Load Message Attributes**: Message attributes are loaded from the JSON file specified in the `message_attributes` parameter.
4. **Send Message**: The script sends the message to the specified SQS queue. If the queue is a FIFO queue, it supports deduplication and message grouping.

### Debug Mode
Enable debug mode with the `-d` flag to see detailed logs:
```bash
python easy_sqs.py -p parameters.properties -d
```

## Example Files
- **Message Body**: `messages/large_create_game.json`
- **Message Attributes**: `messages/update_game_status.json`

## Error Handling
If any required file is missing or improperly formatted, the script will log an error and exit.

## Author
RCarrillo Dev - 
https://github.com/rcarrillodev
>>>>>>> dev
